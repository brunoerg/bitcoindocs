(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{396:function(t,e,a){"use strict";a.r(e);var i=a(43),o=Object(i.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"_109"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_109"}},[t._v("#")]),t._v(" 109")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",[a("code",[t._v("  BIP: 109\n  Layer: Consensus (hard fork)\n  Title: Two million byte size limit with sigop and sighash limits\n  Author: Gavin Andresen <gavinandresen@gmail.com>\n  Comments-Summary: No comments yet.\n  Comments-URI: https://github.com/bitcoin/bips/wiki/Comments:BIP-0109\n  Status: Rejected\n  Type: Standards Track\n  Created: 2016-01-28\n  License: PD\n")])])]),a("h2",{attrs:{id:"abstract"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#abstract"}},[t._v("#")]),t._v(" Abstract")]),t._v(" "),a("p",[t._v("One-time increase in total amount of transaction data permitted in a\nblock from 1MB to 2MB, with limits on signature operations and hashing.")]),t._v(" "),a("h2",{attrs:{id:"motivation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#motivation"}},[t._v("#")]),t._v(" Motivation")]),t._v(" "),a("ol",[a("li",[t._v("Continue current economic policy.")]),t._v(" "),a("li",[t._v("Exercise hard fork network upgrade.")]),t._v(" "),a("li",[t._v("Mitigate potential CPU exhaustion attacks")])]),t._v(" "),a("h2",{attrs:{id:"specification"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#specification"}},[t._v("#")]),t._v(" Specification")]),t._v(" "),a("h3",{attrs:{id:"max-block-size-increased-to-2-000-000-bytes-max-block-size-increased-to-2000000-bytes"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#max-block-size-increased-to-2-000-000-bytes-max-block-size-increased-to-2000000-bytes"}},[t._v("#")]),t._v(" MAX_BLOCK_SIZE increased to 2,000,000 bytes {#max_block_size_increased_to_2000000_bytes}")]),t._v(" "),a("p",[t._v("The maximum number of bytes in a canonically serialized block shall be\nincreased from 1,000,000 bytes to 2,000,000 bytes.")]),t._v(" "),a("h3",{attrs:{id:"switch-to-accurately-counted-sigop-limit-of-20-000-per-block-switch-to-accurately-counted-sigop-limit-of-20000-per-block"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#switch-to-accurately-counted-sigop-limit-of-20-000-per-block-switch-to-accurately-counted-sigop-limit-of-20000-per-block"}},[t._v("#")]),t._v(" Switch to accurately-counted sigop limit of 20,000 per block {#switch_to_accurately_counted_sigop_limit_of_20000_per_block}")]),t._v(" "),a("p",[t._v("The existing MAX_SIGOPS limit of 20,000 signature operations per block\nshall be retained, but only ECDSA verifications actually performed to\nvalidate the block shall be counted.")]),t._v(" "),a("p",[t._v("In particular:")]),t._v(" "),a("ul",[a("li",[t._v("The coinbase scriptSig is not counted")]),t._v(" "),a("li",[t._v("Signature operations in un-executed branches of a Script are not\ncounted")]),t._v(" "),a("li",[t._v("OP_CHECKMULTISIG evaluations are counted accurately; if the\nsignature for a 1-of-20 OP_CHECKMULTISIG is satisified by the public\nkey nearest the top of the execution stack, it is counted as one\nsignature operation. If it is satisfied by the public key nearest\nthe bottom of the execution stack, it is counted as twenty signature\noperations.")]),t._v(" "),a("li",[t._v("Signature operations involving invalidly encoded signatures or\npublic keys are not counted towards the limit")])]),t._v(" "),a("h3",{attrs:{id:"add-a-new-limit-of-1-300-000-000-bytes-hashed-to-compute-transaction-signatures-per-block-add-a-new-limit-of-1300000000-bytes-hashed-to-compute-transaction-signatures-per-block"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#add-a-new-limit-of-1-300-000-000-bytes-hashed-to-compute-transaction-signatures-per-block-add-a-new-limit-of-1300000000-bytes-hashed-to-compute-transaction-signatures-per-block"}},[t._v("#")]),t._v(" Add a new limit of 1,300,000,000 bytes hashed to compute transaction signatures per block {#add_a_new_limit_of_1300000000_bytes_hashed_to_compute_transaction_signatures_per_block}")]),t._v(" "),a("p",[t._v("The amount of data hashed to compute signature hashes is limited to\n1,300,000,000 bytes per block. The same rules for counting are used as\nfor counting signature operations.")]),t._v(" "),a("h3",{attrs:{id:"activation-75-hashpower-support-trigger-followed-by-28-day-grace-period-activation-75-hashpower-support-trigger-followed-by-28-day-grace-period"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#activation-75-hashpower-support-trigger-followed-by-28-day-grace-period-activation-75-hashpower-support-trigger-followed-by-28-day-grace-period"}},[t._v("#")]),t._v(" Activation: 75% hashpower support trigger, followed by 28-day 'grace period' {#activation_75_hashpower_support_trigger_followed_by_28_day_grace_period}")]),t._v(" "),a("p",[t._v("Solo miners or mining pool operators express their support for this BIP\nby setting the fourth-highest-bit in the block's 32-bit version number\n(0x10000000 in hex). The first block with that bit set, a timestamp less\nthan or equal to the expiration time, and with at least 750 out of 1000\nblocks preceding it (with heights H-1000..H-1) with that bit set, shall\ndefine the beginning of a grace period. Blocks with timestamps greater\nthan or equal to the triggering block's timestamp plus 28 days\n(60*60*24*28 seconds) shall be subject to the new limits.")]),t._v(" "),a("p",[t._v("As always, miners are expected to use their best judgement for what is\nbest for the entire Bitcoin ecosystem when making decisions about what\nconsensus-level changes to support.")]),t._v(" "),a("h3",{attrs:{id:"expiration-1-jan-2018-expiration-1-jan-2018"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#expiration-1-jan-2018-expiration-1-jan-2018"}},[t._v("#")]),t._v(" Expiration: 1-Jan-2018 {#expiration_1_jan_2018}")]),t._v(" "),a("p",[t._v("If this BIP is not triggered before 1-Jan-2018 00:00:00 GMT it should be\nconsidered withdrawn.")]),t._v(" "),a("p",[t._v("Miners that support this BIP should set bit 0x10000000 in the block\nversion until 1-Jan-2018. After that date, that bit can be safely\nre-used for future consensus rule upgrades.")]),t._v(" "),a("h2",{attrs:{id:"backward-compatibility-backward-compatibility"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#backward-compatibility-backward-compatibility"}},[t._v("#")]),t._v(" Backward compatibility {#backward_compatibility}")]),t._v(" "),a("p",[t._v("Fully validating older clients are not compatible with this change. The\nfirst block exceeding the old limits on block size or inaccurately\ncounted signature operations will partition older clients off the new\nnetwork.")]),t._v(" "),a("p",[t._v("SPV (simple payment validation) wallets are compatible with this change.")]),t._v(" "),a("h2",{attrs:{id:"rationale"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rationale"}},[t._v("#")]),t._v(" Rationale")]),t._v(" "),a("p",[t._v("In the short term, an increase is needed to handle increasing\ntransaction volume.")]),t._v(" "),a("p",[t._v('The limits on signature operations and amount of signature hashing done\nprevent possible CPU exhaustion attacks by "rogue miners" producing\nvery expensive-to-validate two megabyte blocks. The signature hashing\nlimit is chosen to be impossible to reach with any non-attack\ntransaction or block, to minimize the impact on existing mining or\nwallet software.')]),t._v(" "),a("p",[t._v("The choices of constants for the deployment scheme were motivated by\nprior experience with upgrades to the Bitcoin consensus rules:")]),t._v(" "),a("ul",[a("li",[t._v("0x10000000 was chosen to be compatible with the BIP 9 proposal for\nparallel deployment of soft forks")]),t._v(" "),a("li",[t._v("75% was chosen instead of 95% to minimize the opportunity for a\nsingle large mining pool or miner to be able to veto an increase,\neither because of ideological opposition or threat of violence or\nextortion.")]),t._v(" "),a("li",[t._v("A four-week grace period after the voting period was chosen as a\nbalance between giving people sufficient time to upgrade and keeping\npeople's attention on the urgent need to upgrade.")])]),t._v(" "),a("h2",{attrs:{id:"implementation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#implementation"}},[t._v("#")]),t._v(" Implementation")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/gavinandresen/bitcoin-git/tree/two_mb_bump",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/gavinandresen/bitcoin-git/tree/two_mb_bump"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("See also "),a("a",{attrs:{href:"http://gavinandresen.ninja/a-guided-tour-of-the-2mb-fork",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://gavinandresen.ninja/a-guided-tour-of-the-2mb-fork"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"copyright"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#copyright"}},[t._v("#")]),t._v(" Copyright")]),t._v(" "),a("p",[t._v("This work is placed in the public domain.")])])}),[],!1,null,null,null);e.default=o.exports}}]);